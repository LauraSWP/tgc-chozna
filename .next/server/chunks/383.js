"use strict";exports.id=383,exports.ids=[383],exports.modules={6041:(e,a,s)=>{s.d(a,{default:()=>x});var t=s(326),r=s(7577),l=s(5047),i=s(1664),n=s(9752),o=s(1632),d=s(770);let c=d.Ry({name:d.Z_().min(1).max(100),type_line:d.Z_().min(1).max(100),mana_cost:d.Z_().optional(),power:d.Rx().int().min(0).max(99).optional(),toughness:d.Rx().int().min(0).max(99).optional(),keywords:d.IX(d.Z_()).default([]),rules_json:d.Ry({on_play:d.IX(d.Yj()).optional(),on_enter:d.IX(d.Yj()).optional(),on_leave:d.IX(d.Yj()).optional(),activated:d.IX(d.Yj()).optional(),triggers:d.IX(d.Yj()).optional()}).default({}),flavor_text:d.Z_().optional(),artist:d.Z_().optional(),image_url:d.Z_().url().optional()});d.Ry({name:d.Z_().min(1).max(100),description:d.Z_().max(500).optional(),format:d.Z_().default("casual")}),d.Ry({set_code:d.Z_().min(1),quantity:d.Rx().int().min(1).max(10).default(1)}),d.Ry({target_user_id:d.Z_().uuid(),offered_cards:d.IX(d.Z_()).min(1),requested_cards:d.IX(d.Z_()).min(1),message:d.Z_().max(500).optional()}),d.VK("type",[d.Ry({type:d.i0("play_card"),card_id:d.Z_(),target:d.Z_().optional()}),d.Ry({type:d.i0("activate_ability"),source_id:d.Z_(),ability_index:d.Rx().int().min(0),target:d.Z_().optional()}),d.Ry({type:d.i0("attack"),attackers:d.IX(d.Z_()).min(1),targets:d.IX(d.Z_()).optional()}),d.Ry({type:d.i0("block"),blocks:d.IX(d.Ry({attacker:d.Z_(),blocker:d.Z_()}))}),d.Ry({type:d.i0("pass_priority")}),d.Ry({type:d.i0("pass_turn")}),d.Ry({type:d.i0("mulligan")}),d.Ry({type:d.i0("concede")})]),d.Ry({email:d.Z_().email(),password:d.Z_().min(8).max(128),username:d.Z_().min(3).max(30).regex(/^[a-zA-Z0-9_]+$/)}),d.Ry({username:d.Z_().min(3).max(30).regex(/^[a-zA-Z0-9_]+$/).optional(),avatar_url:d.Z_().url().optional()}),c.extend({set_id:d.Z_().uuid(),rarity_id:d.Rx().int().min(1),external_code:d.Z_().optional()});var m=s(1223);let u=({card:e,frameStyle:a="classic",imageUrl:s,className:r})=>{(0,m.ew)(e.manaCost||"");let l=e.manaCost&&e.manaCost.match(/\{[^}]+\}/g)||[],i=(0,m.kg)(e.rarity||"common"),n={classic:"bg-gradient-to-b from-yellow-50 to-yellow-100 border-yellow-400",modern:"bg-gradient-to-br from-gray-50 to-blue-50 border-blue-400",vintage:"bg-gradient-to-b from-amber-50 to-amber-100 border-amber-600",digital:"bg-gradient-to-br from-cyan-50 to-purple-50 border-cyan-400",mystical:"bg-gradient-to-b from-purple-50 to-pink-50 border-purple-400",industrial:"bg-gradient-to-br from-gray-100 to-slate-100 border-slate-400"},o=n[a]||n.classic;return(0,t.jsxs)("div",{className:(0,m.cn)("relative w-48 h-64 rounded-lg border-2 shadow-lg overflow-hidden",o,r),children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 p-2 bg-black/10",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[t.jsx("div",{className:"flex-1 pr-2",children:t.jsx("h3",{className:"text-sm font-bold text-gray-900 leading-tight",children:e.name||"Card Name"})}),l.length>0&&t.jsx("div",{className:"flex gap-0.5 flex-shrink-0",children:l.map((e,a)=>t.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-200 border border-gray-400 flex items-center justify-center text-xs font-bold",children:e.replace(/[{}]/g,"")},a))})]})}),t.jsx("div",{className:"absolute top-8 left-2 right-2 h-24 bg-gray-200 rounded border overflow-hidden",children:s?t.jsx("img",{src:s,alt:e.name||"Card image",className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDDBC️"}),t.jsx("div",{className:"text-xs",children:"No Image"})]})})}),t.jsx("div",{className:"absolute top-36 left-2 right-2 p-1 bg-white/80 rounded border text-center",children:t.jsx("div",{className:"text-xs font-semibold text-gray-800",children:e.typeLine||"Card Type"})}),t.jsx("div",{className:"absolute top-44 left-2 right-2 bottom-12 p-2 bg-white/80 rounded border overflow-hidden",children:(0,t.jsxs)("div",{className:"text-xs text-gray-800 leading-tight",children:[e.keywords&&e.keywords.length>0&&t.jsx("div",{className:"font-semibold mb-1",children:e.keywords.join(", ")}),e.flavorText&&(0,t.jsxs)("div",{className:"italic text-gray-600 text-xs",children:['"',e.flavorText,'"']})]})}),void 0!==e.power&&void 0!==e.toughness&&t.jsx("div",{className:"absolute bottom-2 right-2 w-8 h-6 bg-white rounded border border-gray-400 flex items-center justify-center",children:(0,t.jsxs)("span",{className:"text-xs font-bold",children:[e.power,"/",e.toughness]})}),t.jsx("div",{className:"absolute bottom-2 left-2 w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:i},title:`${e.rarity} rarity`}),t.jsx("div",{className:"absolute top-1 right-1 px-1 py-0.5 bg-black/60 text-white text-xs rounded",children:a}),t.jsx("div",{className:"absolute bottom-8 right-2 w-4 h-4 bg-gray-400 rounded-full flex items-center justify-center text-xs text-white font-bold",children:"S"})]})},x=({cardId:e,onSave:a,onCancel:s})=>{let d=(0,l.useRouter)(),[c,m]=(0,r.useState)({external_code:"",name:"",type_line:"",mana_cost:"",power:null,toughness:null,keywords:[],rules_json:{},flavor_text:"",artist:"",rarity_id:1,set_id:"",is_active:!0,image_url:"",frame_style:"classic"}),[x,p]=(0,r.useState)([]),[g,b]=(0,r.useState)([]),[h,y]=(0,r.useState)([]),[f,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(""),[_,D]=(0,r.useState)("{}"),[C,w]=(0,r.useState)(null),[k,S]=(0,r.useState)(""),[A,R]=(0,r.useState)(!1),[z,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{O(),e&&q()},[e]),(0,r.useEffect)(()=>{c.mana_cost&&E((c.mana_cost.match(/\{[^}]+\}/g)||[]).map(e=>e.slice(1,-1)))},[c.mana_cost]);let Z=e=>{let a=[...z,e];E(a),m(e=>({...e,mana_cost:a.map(e=>`{${e}}`).join("")}))},I=e=>{let a=z.filter((a,s)=>s!==e);E(a),m(e=>({...e,mana_cost:a.map(e=>`{${e}}`).join("")}))},O=async()=>{try{let[e,a]=await Promise.all([o.OQ.from("rarities").select("*").order("id"),o.OQ.from("card_sets").select("*").order("name")]);e.data&&p(e.data),a.data&&b(a.data)}catch(e){console.error("Error loading reference data:",e)}},q=async()=>{if(e)try{let{data:a,error:s}=await o.OQ.from("card_definitions").select("*").eq("id",e).single();if(s)throw s;a&&(m({external_code:a.external_code||"",name:a.name||"",type_line:a.type_line||"",mana_cost:a.mana_cost||"",power:a.power,toughness:a.toughness,keywords:a.keywords||[],rules_json:a.rules_json||{},flavor_text:a.flavor_text||"",artist:a.artist||"",rarity_id:a.rarity_id||1,set_id:a.set_id||"",is_active:a.is_active??!0,image_url:a.image_url||"",frame_style:a.frame_style||"classic"}),D(JSON.stringify(a.rules_json||{},null,2)))}catch(e){console.error("Error loading card:",e),y(["Failed to load card"])}},$=async()=>{j(!0),y([]);try{let s=[];c.name.trim()||s.push("Name is required"),c.type_line.trim()||s.push("Type line is required"),c.mana_cost&&!function(e){return!e||/^(\{[0-9WUBRGCX]\})*$/.test(e)}(c.mana_cost)&&s.push("Invalid mana cost format");let t={};try{t=JSON.parse(_);let e=function(e){let a=[];try{e.on_play&&!Array.isArray(e.on_play)&&a.push("on_play must be an array"),e.on_enter&&!Array.isArray(e.on_enter)&&a.push("on_enter must be an array"),e.activated&&!Array.isArray(e.activated)&&a.push("activated must be an array"),e.triggers&&!Array.isArray(e.triggers)&&a.push("triggers must be an array");let s=e=>{e.forEach((e,s)=>{switch(e.op||a.push(`Effect ${s} missing operation type`),e.op){case"draw":("number"!=typeof e.count||e.count<1)&&a.push(`Draw effect ${s} needs positive count`);break;case"damage":("number"!=typeof e.amount||e.amount<0)&&a.push(`Damage effect ${s} needs non-negative amount`);break;case"buff":case"debuff":e.selector||a.push(`Buff/Debuff effect ${s} needs selector`)}})};e.on_play&&s(e.on_play),e.on_enter&&s(e.on_enter)}catch(e){a.push("Invalid rules structure")}return{valid:0===a.length,errors:a}}(t);e.valid||s.push(...e.errors)}catch(e){s.push("Invalid rules JSON")}if(s.length>0){y(s),j(!1);return}let r={...c,rules_json:t,power:c.power||null,toughness:c.toughness||null};if(e){let{error:a}=await o.OQ.from("card_definitions").update(r).eq("id",e);if(a)throw a}else{let{error:e}=await o.OQ.from("card_definitions").insert(r);if(e)throw e}a?a(r):d.push("/admin/cards")}catch(e){console.error("Error saving card:",e),y([e.message||"Failed to save card"])}finally{j(!1)}},B=()=>{v.trim()&&!c.keywords.includes(v.trim())&&(m(e=>({...e,keywords:[...e.keywords,v.trim()]})),N(""))},F=e=>{m(a=>({...a,keywords:a.keywords.filter(a=>a!==e)}))},T=e=>{let a={};switch(e){case"draw":a={op:"draw",count:1,target:"self"};break;case"damage":a={op:"damage",amount:1,target:"any"};break;case"buff":a={op:"buff",power:1,toughness:1,until:"end_of_turn",selector:"self"};break;case"destroy":a={op:"destroy",selector:"target_creature"}}try{let e=JSON.parse(_);e.on_play||(e.on_play=[]),e.on_play.push(a),D(JSON.stringify(e,null,2))}catch(e){D(JSON.stringify({on_play:[a]},null,2))}},P=async e=>{R(!0);try{let a=e.name.split(".").pop(),s=`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${a}`,{data:t,error:r}=await o.OQ.storage.from("card-images").upload(s,e);if(r)throw r;let{data:{publicUrl:l}}=o.OQ.storage.from("card-images").getPublicUrl(s);m(e=>({...e,image_url:l})),S(l)}catch(e){console.error("Error uploading image:",e),y(e=>[...e,"Failed to upload image"])}finally{R(!1)}},X=[{value:"classic",label:"Cl\xe1sico",preview:"\uD83D\uDDBC️ Marco tradicional de carta"},{value:"modern",label:"Moderno",preview:"✨ Dise\xf1o moderno y elegante"},{value:"vintage",label:"Vintage",preview:"\uD83D\uDCDC Estilo retro"},{value:"digital",label:"Digital",preview:"\uD83D\uDCBE Tema cibern\xe9tico"},{value:"mystical",label:"M\xedstico",preview:"\uD83C\uDF1F Efectos m\xe1gicos"},{value:"industrial",label:"Industrial",preview:"⚙️ Tema tecnol\xf3gico/metal"}],J=[{symbol:"0",color:"bg-gray-300",label:"Cero"},{symbol:"1",color:"bg-gray-300",label:"Uno"},{symbol:"2",color:"bg-gray-300",label:"Dos"},{symbol:"3",color:"bg-gray-300",label:"Tres"},{symbol:"4",color:"bg-gray-300",label:"Cuatro"},{symbol:"5",color:"bg-gray-300",label:"Cinco"},{symbol:"6",color:"bg-gray-300",label:"Seis"},{symbol:"X",color:"bg-gray-400",label:"Variable"},{symbol:"W",color:"bg-yellow-200",label:"Blanco"},{symbol:"U",color:"bg-blue-200",label:"Azul"},{symbol:"B",color:"bg-gray-800",label:"Negro"},{symbol:"R",color:"bg-red-200",label:"Rojo"},{symbol:"G",color:"bg-green-200",label:"Verde"},{symbol:"C",color:"bg-gray-200",label:"Incoloro"}],M=e=>{switch(e){case"common":return"~66% de sobres (10/15 cartas)";case"uncommon":return"~20% de sobres (3/15 cartas)";case"rare":case"land":return"~7% de sobres (1/15 cartas)";case"mythic":return"~0.9% de sobres (1/8 espacios raros)";case"token":return"Solo fichas especiales";default:return"Desconocido"}};return t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[t.jsx(n.ll,{className:"text-2xl",children:e?"✏️ Editar Carta":"\uD83C\uDD95 Crear Nueva Carta"}),t.jsx(n.SZ,{className:"text-lg",children:e?"Modifica una carta existente":"Crea una nueva carta para el juego"})]}),(0,t.jsxs)(n.aY,{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:"\uD83C\uDFA8 Vista Previa de la Carta"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:["\uD83D\uDDBC️ Imagen de la Carta",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Esta ser\xe1 la imagen principal de tu carta)"})]}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center bg-gray-50",children:k||c.image_url?(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("img",{src:k||c.image_url,alt:"Vista previa de carta",className:"w-full h-64 object-cover rounded-lg shadow-lg"}),t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{S(""),w(null),m(e=>({...e,image_url:""}))},children:"\uD83D\uDDD1️ Quitar Imagen"})]}):(0,t.jsxs)("div",{className:"space-y-4 py-8",children:[t.jsx("div",{className:"text-gray-400 text-6xl",children:"\uD83D\uDDBC️"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium text-gray-600",children:"No hay imagen seleccionada"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Sube una imagen para ver c\xf3mo quedar\xe1 tu carta"})]})]})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];if(a){w(a);let e=new FileReader;e.onload=()=>{S(e.result)},e.readAsDataURL(a)}},className:"w-full text-sm border rounded-md px-3 py-2",id:"image-upload"}),C&&t.jsx(i.z,{type:"button",onClick:()=>P(C),disabled:A,size:"sm",children:A?"⬆️ Subiendo...":"⬆️ Subir"})]}),t.jsx("div",{className:"text-center text-xs text-gray-500",children:"O pega una URL de imagen aqu\xed abajo"}),t.jsx("input",{type:"url",value:c.image_url,onChange:e=>m(a=>({...a,image_url:e.target.value})),className:"w-full border rounded-md px-3 py-2 text-sm",placeholder:"https://ejemplo.com/imagen.jpg"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:["\uD83D\uDDBC️ Estilo del Marco",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Cambia el dise\xf1o del borde de la carta)"})]}),t.jsx("select",{value:c.frame_style,onChange:e=>m(a=>({...a,frame_style:e.target.value})),className:"w-full border rounded-md px-3 py-2",children:X.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:X.find(e=>e.value===c.frame_style)?.preview})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:["⚡ Vista Previa en Vivo",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(As\xed se ver\xe1 tu carta en el juego)"})]}),t.jsx("div",{className:"flex justify-center bg-gradient-to-br from-blue-50 to-purple-50 p-4 rounded-lg",children:t.jsx(u,{card:{name:c.name||"Nombre de la Carta",typeLine:c.type_line||"Tipo — Subtipo",manaCost:c.mana_cost,power:c.power??void 0,toughness:c.toughness??void 0,keywords:c.keywords,flavorText:c.flavor_text,rarity:x.find(e=>e.id===c.rarity_id)?.code||"common"},frameStyle:c.frame_style,imageUrl:k||c.image_url,className:"scale-90"})})]})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:"\uD83D\uDCDD Detalles de la Carta"}),(0,t.jsxs)("div",{className:"space-y-6 bg-white p-6 rounded-lg border",children:[t.jsx("h4",{className:"font-semibold text-lg flex items-center gap-2",children:"ℹ️ Informaci\xf3n B\xe1sica"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["\uD83C\uDFF7️ C\xf3digo Externo",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Identificador \xfanico, ej: BAS001)"})]}),t.jsx("input",{type:"text",value:c.external_code,onChange:e=>m(a=>({...a,external_code:e.target.value})),className:"w-full border rounded-md px-3 py-2",placeholder:"BAS001"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["\uD83D\uDCDB Nombre de la Carta *",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(El nombre que aparecer\xe1 en la carta)"})]}),t.jsx("input",{type:"text",value:c.name,onChange:e=>m(a=>({...a,name:e.target.value})),className:"w-full border rounded-md px-3 py-2",placeholder:"Desarrollador Cafetero",required:!0})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["\uD83C\uDFAD L\xednea de Tipo *",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Qu\xe9 tipo de carta es, ej: Criatura — Humano Desarrollador)"})]}),t.jsx("input",{type:"text",value:c.type_line,onChange:e=>m(a=>({...a,type_line:e.target.value})),className:"w-full border rounded-md px-3 py-2",placeholder:"Criatura — Humano Desarrollador",required:!0})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg border",children:[(0,t.jsxs)("h4",{className:"font-semibold text-lg flex items-center gap-2",children:["⚡ Constructor de Coste de Man\xe1",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Haz clic en los s\xedmbolos para a\xf1adir man\xe1)"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-md border",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Coste Actual:"}),t.jsx("div",{className:"flex items-center gap-2 flex-wrap min-h-10",children:z.length>0?(0,t.jsxs)(t.Fragment,{children:[z.map((e,a)=>t.jsx("button",{type:"button",onClick:()=>I(a),className:`w-8 h-8 rounded-full border-2 border-gray-400 text-sm font-bold flex items-center justify-center hover:bg-red-100 transition-colors ${J.find(a=>a.symbol===e)?.color||"bg-gray-300"} ${"B"===e?"text-white":"text-black"}`,title:`Clic para quitar ${e}`,children:e},a)),t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{E([]),m(e=>({...e,mana_cost:""}))},children:"\uD83D\uDDD1️ Limpiar"})]}):t.jsx("span",{className:"text-gray-500 italic",children:"Sin coste de man\xe1"})})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"S\xedmbolos de Man\xe1 Disponibles:"}),t.jsx("div",{className:"grid grid-cols-7 md:grid-cols-14 gap-2",children:J.map(e=>t.jsx("button",{type:"button",onClick:()=>Z(e.symbol),className:`w-10 h-10 rounded-full border-2 border-gray-400 text-sm font-bold flex items-center justify-center hover:scale-110 transition-transform ${e.color} ${"B"===e.symbol?"text-white":"text-black"}`,title:`A\xf1adir ${e.label}`,children:e.symbol},e.symbol))}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"\uD83D\uDCA1 Tip: Los n\xfameros representan man\xe1 incoloro, las letras representan colores espec\xedficos"})]})]}),(0,t.jsxs)("div",{className:"space-y-4 bg-orange-50 p-6 rounded-lg border",children:[(0,t.jsxs)("h4",{className:"font-semibold text-lg flex items-center gap-2",children:["\uD83D\uDCAA Estad\xedsticas de Criatura",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Solo para criaturas)"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["⚔️ Poder",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Da\xf1o que hace al atacar)"})]}),t.jsx("input",{type:"number",value:c.power||"",onChange:e=>m(a=>({...a,power:e.target.value?parseInt(e.target.value):null})),className:"w-full border rounded-md px-3 py-2",min:"0",max:"99",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["\uD83D\uDEE1️ Resistencia",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Da\xf1o que puede recibir antes de morir)"})]}),t.jsx("input",{type:"number",value:c.toughness||"",onChange:e=>m(a=>({...a,toughness:e.target.value?parseInt(e.target.value):null})),className:"w-full border rounded-md px-3 py-2",min:"0",max:"99",placeholder:"0"})]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 bg-white p-3 rounded border",children:["\uD83D\uDCA1 ",t.jsx("strong",{children:"Tip:"})," Solo rellena estos campos si tu carta es una criatura. Las cartas de hechizo, encantamiento, etc. no necesitan poder y resistencia."]})]}),(0,t.jsxs)("div",{className:"space-y-4 bg-purple-50 p-6 rounded-lg border",children:[t.jsx("h4",{className:"font-semibold text-lg flex items-center gap-2",children:"\uD83D\uDC8E Rareza y Colecci\xf3n"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["⭐ Rareza de la Carta *",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Qu\xe9 tan rara es en los sobres)"})]}),t.jsx("select",{value:c.rarity_id,onChange:e=>m(a=>({...a,rarity_id:parseInt(e.target.value)})),className:"w-full border rounded-md px-3 py-2",required:!0,children:x.map(e=>t.jsx("option",{value:e.id,children:e.display_name},e.id))}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\uD83D\uDCCA Probabilidad: ",M(x.find(e=>e.id===c.rarity_id)?.code)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["\uD83D\uDCDA Colecci\xf3n *",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(A qu\xe9 set pertenece esta carta)"})]}),(0,t.jsxs)("select",{value:c.set_id,onChange:e=>m(a=>({...a,set_id:e.target.value})),className:"w-full border rounded-md px-3 py-2",required:!0,children:[t.jsx("option",{value:"",children:"Selecciona una colecci\xf3n"}),g.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 bg-green-50 p-6 rounded-lg border",children:[(0,t.jsxs)("h4",{className:"font-semibold text-lg flex items-center gap-2",children:["\uD83C\uDFF7️ Palabras Clave",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Habilidades especiales de la carta)"})]}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[t.jsx("input",{type:"text",value:v,onChange:e=>N(e.target.value),className:"flex-1 border rounded-md px-3 py-2",placeholder:"volar, prisa, vigilancia, etc.",onKeyPress:e=>"Enter"===e.key&&B()}),t.jsx(i.z,{onClick:B,type:"button",variant:"outline",children:"➕ A\xf1adir"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:c.keywords.map(e=>(0,t.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm flex items-center gap-1",children:[e,t.jsx("button",{onClick:()=>F(e),className:"text-blue-600 hover:text-blue-800",children:"\xd7"})]},e))}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 bg-white p-3 rounded border",children:["\uD83D\uDCA1 ",t.jsx("strong",{children:"Tip:"}),' Las palabras clave son habilidades especiales como "volar" (no puede ser bloqueada), "prisa" (puede atacar inmediatamente), etc.']})]}),(0,t.jsxs)("div",{className:"space-y-4 bg-red-50 p-6 rounded-lg border",children:[(0,t.jsxs)("h4",{className:"font-semibold text-lg flex items-center gap-2",children:["⚡ Efectos de la Carta",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Qu\xe9 hace la carta cuando se juega)"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("h5",{className:"text-sm font-medium mb-2",children:"\uD83D\uDE80 Plantillas de Efectos R\xe1pidos"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{name:"Robar Cartas",description:"Roba cartas al jugarse",template:{on_play:[{op:"draw",count:1,target:"self"}]}},{name:"Da\xf1o Directo",description:"Hace da\xf1o a cualquier objetivo",template:{on_play:[{op:"damage",amount:2,target:"any"}]}},{name:"Potenciar Criatura",description:"Mejora las estad\xedsticas de criatura",template:{on_play:[{op:"buff",power:1,toughness:1,until:"end_of_turn",selector:"target_creature"}]}},{name:"Destruir",description:"Destruye permanente objetivo",template:{on_play:[{op:"destroy",selector:"target_creature"}]}},{name:"Al Entrar",description:"Efecto cuando la criatura entra",template:{on_enter:[{op:"draw",count:1,target:"self"}]}},{name:"Habilidad Activada",description:"Paga un coste para activar",template:{activated:[{cost:"{1}, {T}",effects:[{op:"draw",count:1,target:"self"}]}]}},{name:"Al Morir",description:"Efecto cuando muere",template:{on_death:[{op:"damage",amount:2,target:"any"}]}},{name:"Generar Man\xe1",description:"A\xf1ade man\xe1 al pool",template:{activated:[{cost:"{T}",effects:[{op:"gain_mana",colors:["C"],amount:1}]}]}}].map((e,a)=>(0,t.jsxs)(i.z,{type:"button",variant:"outline",size:"sm",className:"h-auto p-2 flex flex-col items-center text-center",onClick:()=>D(JSON.stringify(e.template,null,2)),title:e.description,children:[t.jsx("span",{className:"text-xs font-medium",children:e.name}),t.jsx("span",{className:"text-xs text-gray-500",children:e.description})]},a))})]}),(0,t.jsxs)("div",{className:"mb-2 flex flex-wrap gap-2",children:[t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>T("draw"),children:"+ Robar Cartas"}),t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>T("damage"),children:"+ Hacer Da\xf1o"}),t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>T("buff"),children:"+ Potenciar Criatura"}),t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>T("destroy"),children:"+ Destruir"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"\uD83D\uDD27 Editor JSON Avanzado"}),t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{try{let e=JSON.parse(_);D(JSON.stringify(e,null,2))}catch(e){}},children:"\uD83D\uDCD0 Formatear JSON"})]}),t.jsx("textarea",{value:_,onChange:e=>D(e.target.value),className:"w-full border rounded-md px-3 py-2 font-mono text-sm h-32",placeholder:'{"on_play": [{"op": "draw", "count": 1, "target": "self"}]}'}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 bg-white p-3 rounded border",children:["\uD83D\uDCA1 ",t.jsx("strong",{children:"Tip:"})," Usa las plantillas de arriba para configuraci\xf3n r\xe1pida, luego personaliza en el editor JSON"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 bg-yellow-50 p-6 rounded-lg border",children:[t.jsx("h4",{className:"font-semibold text-lg flex items-center gap-2",children:"\uD83D\uDCDD Texto y Cr\xe9ditos"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["\uD83D\uDCAC Texto de Sabor",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Frase divertida o tem\xe1tica)"})]}),t.jsx("textarea",{value:c.flavor_text,onChange:e=>m(a=>({...a,flavor_text:e.target.value})),className:"w-full border rounded-md px-3 py-2 h-20 resize-none",placeholder:"Una cita divertida o tem\xe1tica..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["\uD83C\uDFA8 Artista",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Qui\xe9n cre\xf3 la imagen)"})]}),t.jsx("input",{type:"text",value:c.artist,onChange:e=>m(a=>({...a,artist:e.target.value})),className:"w-full border rounded-md px-3 py-2",placeholder:"Nombre del Artista"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 bg-purple-50 p-6 rounded-lg border",children:[t.jsx("h4",{className:"font-semibold text-lg flex items-center gap-2",children:"\uD83D\uDCCA Configuraci\xf3n de Distribuci\xf3n"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:["✅ Disponibilidad",t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Si aparece en sobres y juegos)"})]}),t.jsx("div",{className:"space-y-2",children:(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:c.is_active,onChange:e=>m(a=>({...a,is_active:e.target.checked})),className:"rounded"}),t.jsx("span",{className:"text-sm",children:"La carta est\xe1 activa (aparece en sobres y juegos)"})]})})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"\uD83D\uDCE6 Informaci\xf3n de Sobres"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsxs)("p",{children:["• Esta carta aparecer\xe1 en sobres de ",t.jsx("strong",{children:g.find(e=>e.id===c.set_id)?.name||"colecci\xf3n seleccionada"})]}),(0,t.jsxs)("p",{children:["• Rareza: ",t.jsx("strong",{children:x.find(e=>e.id===c.rarity_id)?.display_name||"Desconocida"})]}),(0,t.jsxs)("p",{children:["• Probabilidad aproximada: ",M(x.find(e=>e.id===c.rarity_id)?.code)]})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"\uD83D\uDE80 Acciones R\xe1pidas (Despu\xe9s de Guardar)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,t.jsxs)("div",{className:"p-3 border rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl mb-1",children:"\uD83C\uDF81"}),t.jsx("div",{className:"text-xs",children:"Dar a Usuarios"})]}),(0,t.jsxs)("div",{className:"p-3 border rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCE6"}),t.jsx("div",{className:"text-xs",children:"A\xf1adir a Sobres"})]}),(0,t.jsxs)("div",{className:"p-3 border rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl mb-1",children:"\uD83C\uDFD7️"}),t.jsx("div",{className:"text-xs",children:"Crear Mazo"})]}),(0,t.jsxs)("div",{className:"p-3 border rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDD27"}),t.jsx("div",{className:"text-xs",children:"Probar Efectos"})]})]})]})]}),h.length>0&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[t.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"⚠️ Errores:"}),t.jsx("ul",{className:"text-red-700 text-sm space-y-1",children:h.map((e,a)=>(0,t.jsxs)("li",{children:["• ",e]},a))})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-4",children:[t.jsx(i.z,{onClick:$,disabled:f,className:"flex-1 text-lg py-3",children:f?"⏳ Guardando...":e?"\uD83D\uDCBE Actualizar Carta":"\uD83D\uDE80 Crear Carta"}),t.jsx(i.z,{onClick:s||(()=>d.back()),variant:"outline",disabled:f,className:"px-8 py-3",children:"❌ Cancelar"})]})]})]})})}},7039:(e,a,s)=>{s.d(a,{z:()=>d});var t=s(9510),r=s(1159),l=s(3025),i=s(6145),n=s(644);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:a,size:s,asChild:r=!1,...i},d)=>{let c=r?l.g7:"button";return t.jsx(c,{className:(0,n.cn)(o({variant:a,size:s,className:e})),ref:d,...i})});d.displayName="Button"}};