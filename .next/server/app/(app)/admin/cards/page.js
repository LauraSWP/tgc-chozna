(()=>{var e={};e.id=536,e.ids=[536],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},2134:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),a(9233),a(3596),a(5866),a(2029);var t=a(3191),r=a(8716),l=a(7922),i=a.n(l),n=a(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["(app)",{children:["admin",{children:["cards",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9233)),"C:\\Users\\bkgum\\OneDrive\\Documents\\PythonScripts\\TGC\\tgc-chozna\\src\\app\\(app)\\admin\\cards\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3596)),"C:\\Users\\bkgum\\OneDrive\\Documents\\PythonScripts\\TGC\\tgc-chozna\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"C:\\Users\\bkgum\\OneDrive\\Documents\\PythonScripts\\TGC\\tgc-chozna\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\bkgum\\OneDrive\\Documents\\PythonScripts\\TGC\\tgc-chozna\\src\\app\\(app)\\admin\\cards\\page.tsx"],m="/(app)/admin/cards/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/admin/cards/page",pathname:"/admin/cards",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8821:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,9404,23)),Promise.resolve().then(a.bind(a,5389))},2384:(e,s,a)=>{"use strict";a.d(s,{Z:()=>n});var t=a(326);a(7577);var r=a(9752),l=a(1223);let i=({symbol:e})=>t.jsx("span",{className:(0,l.cn)("mana-symbol",(e=>{switch(e){case"W":return"mana-W";case"U":return"mana-U";case"B":return"mana-B";case"R":return"mana-R";case"G":return"mana-G";default:return"mana-C"}})(e)),children:e}),n=({card:e,foil:s=!1,size:a="medium",interactive:n=!1,selected:c=!1,onClick:d,className:o})=>{let m=(0,l.kg)(e.rarity);(0,l.ew)(e.manaCost||"");let x=e.manaCost&&e.manaCost.match(/\{[^}]+\}/g)||[];return t.jsx(r.Zb,{className:(0,l.cn)("relative overflow-hidden transition-all duration-200",{small:"w-24 h-32",medium:"w-32 h-44",large:"w-48 h-64"}[a],n&&"cursor-pointer card-hover",c&&"ring-2 ring-blue-500 ring-offset-2",s&&"foil-effect",`card-rarity-${e.rarity}`,o),style:{borderColor:m},onClick:d,children:(0,t.jsxs)(r.aY,{className:"p-2 h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[t.jsx("h3",{className:"text-xs font-semibold leading-tight flex-1 pr-1",children:e.name}),x.length>0&&t.jsx("div",{className:"flex gap-0.5 flex-shrink-0",children:x.map((e,s)=>t.jsx(i,{symbol:e.replace(/[{}]/g,"")},s))})]}),(0,t.jsxs)("div",{className:"flex-1 relative bg-gray-100 rounded mb-1 overflow-hidden",children:[e.imageUrl?t.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:t.jsx("span",{className:"text-xs text-center",children:"No Image"})}),s&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent"})]}),t.jsx("div",{className:"text-xs text-gray-600 mb-1 truncate",children:e.typeLine}),void 0!==e.power&&void 0!==e.toughness&&(0,t.jsxs)("div",{className:"absolute bottom-1 right-1 bg-white rounded px-1 text-xs font-bold border",children:[e.power,"/",e.toughness]}),e.keywords&&e.keywords.length>0&&t.jsx("div",{className:"text-xs text-blue-600 truncate",children:e.keywords.join(", ")}),s&&t.jsx("div",{className:"absolute top-1 right-1 bg-yellow-400 text-yellow-900 text-xs px-1 rounded",children:"âœ¨"})]})})}},5389:(e,s,a)=>{"use strict";a.d(s,{default:()=>m});var t=a(326),r=a(7577),l=a(1664),i=a(9752),n=a(2384),c=a(6041),d=a(1632),o=a(1223);let m=({initialCards:e})=>{let[s,a]=(0,r.useState)(e),[m,x]=(0,r.useState)(""),[u,h]=(0,r.useState)("all"),[p,f]=(0,r.useState)("all"),[g,j]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),[N,b]=(0,r.useState)(!1),w=(0,r.useMemo)(()=>s.filter(e=>{let s=e.name.toLowerCase().includes(m.toLowerCase())||e.type_line.toLowerCase().includes(m.toLowerCase())||e.external_code?.toLowerCase().includes(m.toLowerCase()),a="all"===u||e.rarities?.code===u,t="all"===p||e.card_sets?.code===p,r=g||e.is_active;return s&&a&&t&&r}),[s,m,u,p,g]),C=(0,r.useMemo)(()=>Array.from(new Set(s.map(e=>e.rarities?.code).filter(Boolean))),[s]),_=(0,r.useMemo)(()=>Array.from(new Set(s.map(e=>e.card_sets?.code).filter(Boolean))),[s]),k=async(e,s)=>{try{let{error:t}=await d.OQ.from("card_definitions").update({is_active:!s}).eq("id",e);if(t)throw t;a(a=>a.map(a=>a.id===e?{...a,is_active:!s}:a))}catch(e){console.error("Error toggling card active status:",e)}},S=async e=>{if(confirm("Are you sure you want to delete this card? This action cannot be undone."))try{let{error:s}=await d.OQ.from("card_definitions").delete().eq("id",e);if(s)throw s;a(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Error deleting card:",e)}},P=e=>({id:e.id,setCode:e.card_sets?.code||"BASE",externalCode:e.external_code,name:e.name,rarity:e.rarities?.code||"common",typeLine:e.type_line,manaCost:e.mana_cost,power:e.power,toughness:e.toughness,keywords:e.keywords,rules:e.rules_json||{},flavorText:e.flavor_text,artist:e.artist});return N?t.jsx(c.default,{cardId:v||void 0,onSave:()=>{window.location.reload()},onCancel:()=>{b(!1),y(null)}}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:t.jsx(i.ll,{children:"Filters"})}),t.jsx(i.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Search"}),t.jsx("input",{type:"text",value:m,onChange:e=>x(e.target.value),className:"w-full border rounded-md px-3 py-2",placeholder:"Search cards..."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rarity"}),(0,t.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full border rounded-md px-3 py-2",children:[t.jsx("option",{value:"all",children:"All Rarities"}),C.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Set"}),(0,t.jsxs)("select",{value:p,onChange:e=>f(e.target.value),className:"w-full border rounded-md px-3 py-2",children:[t.jsx("option",{value:"all",children:"All Sets"}),_.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsx("div",{className:"flex items-end",children:(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:g,onChange:e=>j(e.target.checked),className:"rounded"}),t.jsx("span",{className:"text-sm",children:"Show inactive cards"})]})})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",w.length," of ",s.length," cards"]}),t.jsx(l.z,{onClick:()=>{y(null),b(!0)},children:"Create New Card"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:w.map(e=>t.jsx(i.Zb,{className:(0,o.cn)("relative overflow-hidden",!e.is_active&&"opacity-50 border-red-300"),children:(0,t.jsxs)(i.aY,{className:"p-4",children:[t.jsx("div",{className:"mb-4 flex justify-center",children:t.jsx(n.Z,{card:P(e),size:"small"})}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Code:"}),t.jsx("span",{className:"font-mono",children:e.external_code||"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Rarity:"}),t.jsx("span",{className:"px-2 py-1 rounded text-xs text-white",style:{backgroundColor:(0,o.kg)(e.rarities?.code||"common")},children:e.rarities?.display_name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Set:"}),t.jsx("span",{children:e.card_sets?.code})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Status:"}),t.jsx("span",{className:e.is_active?"text-green-600":"text-red-600",children:e.is_active?"Active":"Inactive"})]}),e.keywords&&e.keywords.length>0&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Keywords:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.keywords.slice(0,3).map(e=>t.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs",children:e},e)),e.keywords.length>3&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.keywords.length-3," more"]})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[t.jsx(l.z,{onClick:()=>{y(e.id),b(!0)},size:"sm",className:"w-full",children:"Edit"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(l.z,{onClick:()=>k(e.id,e.is_active),size:"sm",variant:"outline",className:e.is_active?"text-red-600":"text-green-600",children:e.is_active?"Deactivate":"Activate"}),t.jsx(l.z,{onClick:()=>S(e.id),size:"sm",variant:"outline",className:"text-red-600",children:"Delete"})]})]})]})},e.id))}),0===w.length&&t.jsx(i.Zb,{children:(0,t.jsxs)(i.aY,{className:"py-12 text-center",children:[t.jsx("p",{className:"text-gray-500 mb-4",children:"No cards found matching your filters"}),t.jsx(l.z,{onClick:()=>{x(""),h("all"),f("all"),j(!1)},variant:"outline",children:"Clear Filters"})]})})]})}},9233:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var t=a(9510),r=a(3804),l=a(7039),i=a(5456),n=a(1243),c=a(8585),d=a(7371);let o=(0,a(8570).createProxy)(String.raw`C:\Users\bkgum\OneDrive\Documents\PythonScripts\TGC\tgc-chozna\src\components\admin\CardManagementClient.tsx#default`);async function m(){let e=await (0,i.PR)();e||(0,c.redirect)("/login");let{data:s}=await (0,i.et)(e.id);s?.role!=="admin"&&(0,c.redirect)("/dashboard");let{data:a}=await (0,n.j4)();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Card Management"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Create, edit, and manage all game cards"})]}),t.jsx(l.z,{asChild:!0,children:t.jsx(d.default,{href:"/admin/cards/new",children:"Create New Card"})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:(()=>{let e=a?.reduce((e,s)=>{let a=s.rarities?.code||"unknown";return e.total++,e[a]=(e[a]||0)+1,s.is_active&&e.active++,e},{total:0,active:0})||{total:0,active:0};return(0,t.jsxs)(t.Fragment,{children:[t.jsx(r.Zb,{children:(0,t.jsxs)(r.aY,{className:"p-6",children:[t.jsx("div",{className:"text-2xl font-bold",children:e.total}),t.jsx("p",{className:"text-sm text-gray-600",children:"Total Cards"})]})}),t.jsx(r.Zb,{children:(0,t.jsxs)(r.aY,{className:"p-6",children:[t.jsx("div",{className:"text-2xl font-bold",children:e.active}),t.jsx("p",{className:"text-sm text-gray-600",children:"Active Cards"})]})}),t.jsx(r.Zb,{children:(0,t.jsxs)(r.aY,{className:"p-6",children:[t.jsx("div",{className:"text-2xl font-bold",children:e.rare||0}),t.jsx("p",{className:"text-sm text-gray-600",children:"Rare Cards"})]})}),t.jsx(r.Zb,{children:(0,t.jsxs)(r.aY,{className:"p-6",children:[t.jsx("div",{className:"text-2xl font-bold",children:e.mythic||0}),t.jsx("p",{className:"text-sm text-gray-600",children:"Mythic Cards"})]})})]})})()}),t.jsx(o,{initialCards:a||[]})]})}},3804:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,SZ:()=>d,Zb:()=>i,aY:()=>o,ll:()=>c});var t=a(9510),r=a(1159),l=a(644);let i=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},1243:(e,s,a)=>{"use strict";a.d(s,{Gb:()=>n,JJ:()=>l,j4:()=>r,jT:()=>i});var t=a(5456);async function r(e,s=100){let a=(await (0,t.eI)()).from("card_definitions").select(`
      *,
      rarities(code, display_name, color),
      card_sets(code, name)
    `).eq("is_active",!0).limit(s);return e&&(a=a.eq("card_sets.code",e)),a}async function l(e){return(await (0,t.eI)()).from("user_collection_summary").select("*").eq("owner",e)}async function i(e){return(await (0,t.eI)()).from("deck_summary").select("*").eq("owner",e).order("updated_at",{ascending:!1})}async function n(e){return(await (0,t.eI)()).from("user_currencies").select("*").eq("user_id",e).single()}}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[276,305,254,404,835,761,314,383],()=>a(2134));module.exports=t})();