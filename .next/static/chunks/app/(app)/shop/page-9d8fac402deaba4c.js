(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[933],{201:function(e,s,r){Promise.resolve().then(r.bind(r,9193))},9193:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var a=r(7437),t=r(2265),n=r(9820),i=r(2381),l=r(8614),c=r(521),d=r(7003),o=r(3448),x=e=>{let{isOpen:s=!0,onOpenPack:r,userCoins:x=0,className:m}=e,[u,h]=(0,t.useState)(!1),[f,j]=(0,t.useState)([]),[g,p]=(0,t.useState)(-1),[b,N]=(0,t.useState)(1),[y,v]=(0,t.useState)("BASE"),w=x>=150*b,k=async()=>{if(r&&w){h(!0),j([]),p(-1);try{let e=await r(y,b);if(e.success&&e.packs){j(e.packs);for(let s=0;s<e.packs.length;s++)await (0,o.gw)(500),p(s),await (0,o.gw)(2e3);p(-1)}}catch(e){console.error("Pack opening failed:",e)}finally{h(!1)}}},C=e=>{N(Math.max(1,Math.min(10,e)))};return s?(0,a.jsxs)("div",{className:(0,o.cn)("space-y-6",m),children:[(0,a.jsxs)(n.Zb,{className:"pack-opening-interface",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Abrir Sobres"}),(0,a.jsx)("span",{className:"text-sm font-normal",children:(0,o.xG)(x)})]})}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Set"}),(0,a.jsx)("select",{value:y,onChange:e=>v(e.target.value),className:"w-full border rounded-md px-3 py-2",disabled:u,children:(0,a.jsx)("option",{value:"BASE",children:"Base Set"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Cantidad (Cuesta: ",(0,o.xG)(150*b),")"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>C(b-1),disabled:b<=1||u,children:"-"}),(0,a.jsx)("span",{className:"w-12 text-center font-mono",children:b}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>C(b+1),disabled:b>=10||u,children:"+"})]})]}),(0,a.jsx)(i.z,{onClick:k,disabled:!w||u,className:"w-full",size:"lg",children:u?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Opening Pack",b>1?"s":"","..."]}):"Open ".concat(b," Pack").concat(b>1?"s":"")}),!w&&(0,a.jsxs)("p",{className:"text-sm text-red-600 text-center",children:["\xa1No tienes suficientes moneditas! Te faltan ",(0,o.xG)(150*b-x),"."]})]})]}),(0,a.jsx)(l.M,{children:u&&g>=0&&(0,a.jsx)(c.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,a.jsxs)(n.Zb,{className:"w-96 max-w-[90vw]",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"text-center",children:["Pack ",g+1," of ",b]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)(c.E.div,{className:"w-48 h-64 mx-auto bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-lg mb-4",animate:{rotateY:[0,180,360],scale:[1,1.1,1]},transition:{duration:1,ease:"easeInOut"},children:"\uD83C\uDFB4 Booster Pack"}),(0,a.jsx)("div",{className:"text-center text-sm text-gray-600",children:"Revealing cards..."})]})]})})}),f.length>0&&!u&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-center",children:"Pack Opening Results"}),f.map((e,s)=>(0,a.jsxs)(n.Zb,{className:"overflow-hidden",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"text-center",children:["Pack ",e.packNumber]})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-2",children:e.cards.map((e,s)=>(0,a.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s,duration:.3},children:(0,a.jsx)(d.Z,{card:e.definition,foil:e.foil,size:"small",interactive:!0,className:"hover:scale-105 transition-transform"})},e.userCardId))})})]},s)),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsxs)("p",{className:"font-semibold",children:["Total Cards: ",f.reduce((e,s)=>e+s.cards.length,0)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Foils: ",f.reduce((e,s)=>e+s.cards.filter(e=>e.foil).length,0)]}),(0,a.jsx)(i.z,{onClick:()=>j([]),variant:"outline",className:"mt-4",children:"Close Results"})]})})})]})]}):null},m=r(6634);function u(){let[e,s]=(0,t.useState)({coins:0}),[r,l]=(0,t.useState)(!0);(0,t.useEffect)(()=>{c()},[]);let c=async()=>{try{let{data:{user:e}}=await m.OQ.auth.getUser();if(!e)return;let{data:r}=await m.OQ.from("user_currencies").select("*").eq("user_id",e.id).single();r&&s(r)}catch(e){console.error("Error fetching currency:",e)}finally{l(!1)}},d=async(e,r)=>{try{let a=await fetch("/api/packs/open",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({set_code:e,quantity:r})}),t=await a.json();if(!a.ok)throw Error(t.error||"Pack opening failed");return void 0!==t.remainingCoins&&s(e=>({...e,coins:t.remainingCoins})),t}catch(e){throw console.error("Pack opening error:",e),e}};return r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading shop..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:"\uD83D\uDED2 Tienda de Sobres"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Abre sobres y consigue cartas chulas"}),(0,a.jsx)("div",{className:"flex justify-center text-lg",children:(0,a.jsxs)("span",{className:"font-semibold text-yellow-600",children:["\uD83D\uDCB0 ",(0,o.xG)(e.coins)]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(n.Zb,{className:"relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 bg-yellow-500 text-white px-2 py-1 text-xs font-bold",children:"RECOMENDADO"}),(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)(n.ll,{className:"flex items-center gap-2",children:"\uD83D\uDCE6 Sobre Base"}),(0,a.jsx)(n.SZ,{children:"15 cartas incluyendo al menos 1 rara o m\xedtica"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900 dark:to-orange-900 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Contiene:"}),(0,a.jsxs)("ul",{className:"text-sm space-y-1",children:[(0,a.jsx)("li",{children:"• 10 Cartas comunes"}),(0,a.jsx)("li",{children:"• 3 Cartas infrecuentes"}),(0,a.jsx)("li",{children:"• 1 Carta rara o m\xedtica"}),(0,a.jsx)("li",{children:"• 1 Tierra b\xe1sica"}),(0,a.jsx)("li",{children:"• 1% de chance foil"})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold mb-2",children:(0,o.xG)(150)}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"por sobre"})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)(n.ll,{className:"flex items-center gap-2",children:"\uD83D\uDCE6\uD83D\uDCE6\uD83D\uDCE6 Packs"}),(0,a.jsx)(n.SZ,{children:"M\xe1s sobres, m\xe1s diversi\xf3n"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,a.jsx)("span",{children:"3 Sobres"}),(0,a.jsx)("span",{className:"font-mono",children:(0,o.xG)(400)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,a.jsx)("span",{children:"6 Sobres"}),(0,a.jsx)("span",{className:"font-mono",children:(0,o.xG)(750)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200",children:[(0,a.jsx)("span",{children:"12 Sobres"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-mono",children:(0,o.xG)(1400)}),(0,a.jsx)("div",{className:"text-xs text-yellow-600",children:"\xa1Ahorras 200 moneditas!"})]})]})]})})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)(n.ll,{className:"flex items-center gap-2",children:"\uD83C\uDFAE \xa1Simple y Directo!"}),(0,a.jsx)(n.SZ,{children:"Solo moneditas, solo diversi\xf3n"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-4xl mb-2",children:"\uD83E\uDE99"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Todo se compra con moneditas. Nada de complicaciones."}),(0,a.jsx)(i.z,{disabled:!0,children:"\xa1As\xed de Simple!"})]})})})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)(n.ll,{children:"Abrir Sobres"}),(0,a.jsx)(n.SZ,{children:"Elige tus sobres y descubre tus cartas"})]}),(0,a.jsx)(n.aY,{children:(0,a.jsx)(x,{onOpenPack:d,userCoins:e.coins})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"\uD83E\uDE99 Consigue Moneditas"})}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsx)("li",{children:"• Entrar cada d\xeda: +100 moneditas"}),(0,a.jsx)("li",{children:"• Jugar partidas: +50 moneditas"}),(0,a.jsx)("li",{children:"• Ganar partidas: +100 moneditas"}),(0,a.jsx)("li",{children:"• Primera victoria del d\xeda: +200 moneditas"}),(0,a.jsx)("li",{children:"• Misiones: hasta +500 moneditas"})]})})]})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Todo es aleatorio y gratis. Solo para pasar el rato con los colegas."})})})]})}},7003:function(e,s,r){"use strict";var a=r(7437);r(2265);var t=r(9820),n=r(3448);let i=e=>{let{symbol:s}=e;return(0,a.jsx)("span",{className:(0,n.cn)("mana-symbol",(e=>{switch(e){case"W":return"mana-W";case"U":return"mana-U";case"B":return"mana-B";case"R":return"mana-R";case"G":return"mana-G";default:return"mana-C"}})(s)),children:s})};s.Z=e=>{let{card:s,foil:r=!1,size:l="medium",interactive:c=!1,selected:d=!1,onClick:o,className:x}=e,m=(0,n.kg)(s.rarity);(0,n.ew)(s.manaCost||"");let u=s.manaCost&&s.manaCost.match(/\{[^}]+\}/g)||[];return(0,a.jsx)(t.Zb,{className:(0,n.cn)("relative overflow-hidden transition-all duration-200",{small:"w-24 h-32",medium:"w-32 h-44",large:"w-48 h-64"}[l],c&&"cursor-pointer card-hover",d&&"ring-2 ring-blue-500 ring-offset-2",r&&"foil-effect","card-rarity-".concat(s.rarity),x),style:{borderColor:m},onClick:o,children:(0,a.jsxs)(t.aY,{className:"p-2 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold leading-tight flex-1 pr-1",children:s.name}),u.length>0&&(0,a.jsx)("div",{className:"flex gap-0.5 flex-shrink-0",children:u.map((e,s)=>(0,a.jsx)(i,{symbol:e.replace(/[{}]/g,"")},s))})]}),(0,a.jsxs)("div",{className:"flex-1 relative bg-gray-100 rounded mb-1 overflow-hidden",children:[s.imageUrl?(0,a.jsx)("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,a.jsx)("span",{className:"text-xs text-center",children:"No Image"})}),r&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1 truncate",children:s.typeLine}),void 0!==s.power&&void 0!==s.toughness&&(0,a.jsxs)("div",{className:"absolute bottom-1 right-1 bg-white rounded px-1 text-xs font-bold border",children:[s.power,"/",s.toughness]}),s.keywords&&s.keywords.length>0&&(0,a.jsx)("div",{className:"text-xs text-blue-600 truncate",children:s.keywords.join(", ")}),r&&(0,a.jsx)("div",{className:"absolute top-1 right-1 bg-yellow-400 text-yellow-900 text-xs px-1 rounded",children:"✨"})]})})}},2381:function(e,s,r){"use strict";r.d(s,{z:function(){return d}});var a=r(7437),t=r(2265),n=r(5293),i=r(535),l=r(3448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,s)=>{let{className:r,variant:t,size:i,asChild:d=!1,...o}=e,x=d?n.g7:"button";return(0,a.jsx)(x,{className:(0,l.cn)(c({variant:t,size:i,className:r})),ref:s,...o})});d.displayName="Button"},9820:function(e,s,r){"use strict";r.d(s,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var a=r(7437),t=r(2265),n=r(3448);let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});i.displayName="Card";let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...t})});l.displayName="CardHeader";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});c.displayName="CardTitle";let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",r),...t})});d.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",r),...t})});o.displayName="CardContent",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",r),...t})}).displayName="CardFooter"},6634:function(e,s,r){"use strict";r.d(s,{OQ:function(){return n},w7:function(){return i}});var a=r(1388),t=r(257);let n=(0,a.createBrowserClient)(t.env.NEXT_PUBLIC_SUPABASE_URL,t.env.NEXT_PUBLIC_SUPABASE_ANON_KEY),i=async()=>{let{error:e}=await n.auth.signOut();return{error:e}}},3448:function(e,s,r){"use strict";r.d(s,{cn:function(){return n},ew:function(){return d},gw:function(){return o},kg:function(){return c},uf:function(){return i},xG:function(){return l}});var a=r(1994),t=r(3335);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.m6)((0,a.W)(s))}function i(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function l(e){return"".concat(e," moneditas")}function c(e){return({common:"#9ca3af",uncommon:"#10b981",rare:"#3b82f6",mythic:"#f59e0b",land:"#8b5cf6",token:"#6b7280"})[e.toLowerCase()]||"#9ca3af"}function d(e){return e?e.replace(/\{([^}]+)\}/g,"$1").replace(/([A-Z])/g," $1").trim():""}function o(e){return new Promise(s=>setTimeout(s,e))}r(257)}},function(e){e.O(0,[722,844,971,117,744],function(){return e(e.s=201)}),_N_E=e.O()}]);