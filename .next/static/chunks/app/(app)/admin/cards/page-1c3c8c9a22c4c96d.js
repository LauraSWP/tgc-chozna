(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{6658:function(e,s,a){Promise.resolve().then(a.t.bind(a,2972,23)),Promise.resolve().then(a.bind(a,9467))},7003:function(e,s,a){"use strict";var l=a(7437);a(2265);var t=a(9820),r=a(3448);let i=e=>{let{symbol:s}=e;return(0,l.jsx)("span",{className:(0,r.cn)("mana-symbol",(e=>{switch(e){case"W":return"mana-W";case"U":return"mana-U";case"B":return"mana-B";case"R":return"mana-R";case"G":return"mana-G";default:return"mana-C"}})(s)),children:s})};s.Z=e=>{let{card:s,foil:a=!1,size:n="medium",interactive:d=!1,selected:c=!1,onClick:o,className:m}=e,x=(0,r.kg)(s.rarity);(0,r.ew)(s.manaCost||"");let u=s.manaCost&&s.manaCost.match(/\{[^}]+\}/g)||[];return(0,l.jsx)(t.Zb,{className:(0,r.cn)("relative overflow-hidden transition-all duration-200",{small:"w-24 h-32",medium:"w-32 h-44",large:"w-48 h-64"}[n],d&&"cursor-pointer card-hover",c&&"ring-2 ring-blue-500 ring-offset-2",a&&"foil-effect","card-rarity-".concat(s.rarity),m),style:{borderColor:x},onClick:o,children:(0,l.jsxs)(t.aY,{className:"p-2 h-full flex flex-col",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,l.jsx)("h3",{className:"text-xs font-semibold leading-tight flex-1 pr-1",children:s.name}),u.length>0&&(0,l.jsx)("div",{className:"flex gap-0.5 flex-shrink-0",children:u.map((e,s)=>(0,l.jsx)(i,{symbol:e.replace(/[{}]/g,"")},s))})]}),(0,l.jsxs)("div",{className:"flex-1 relative bg-gray-100 rounded mb-1 overflow-hidden",children:[s.imageUrl?(0,l.jsx)("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,l.jsx)("span",{className:"text-xs text-center",children:"No Image"})}),a&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent"})]}),(0,l.jsx)("div",{className:"text-xs text-gray-600 mb-1 truncate",children:s.typeLine}),void 0!==s.power&&void 0!==s.toughness&&(0,l.jsxs)("div",{className:"absolute bottom-1 right-1 bg-white rounded px-1 text-xs font-bold border",children:[s.power,"/",s.toughness]}),s.keywords&&s.keywords.length>0&&(0,l.jsx)("div",{className:"text-xs text-blue-600 truncate",children:s.keywords.join(", ")}),a&&(0,l.jsx)("div",{className:"absolute top-1 right-1 bg-yellow-400 text-yellow-900 text-xs px-1 rounded",children:"âœ¨"})]})})}},9467:function(e,s,a){"use strict";var l=a(7437),t=a(2265),r=a(2381),i=a(9820),n=a(7003),d=a(7668),c=a(6634),o=a(3448);s.default=e=>{let{initialCards:s}=e,[a,m]=(0,t.useState)(s),[x,u]=(0,t.useState)(""),[h,v]=(0,t.useState)("all"),[j,f]=(0,t.useState)("all"),[p,g]=(0,t.useState)(!1),[y,N]=(0,t.useState)(null),[w,b]=(0,t.useState)(!1),C=(0,t.useMemo)(()=>a.filter(e=>{var s,a,l;let t=e.name.toLowerCase().includes(x.toLowerCase())||e.type_line.toLowerCase().includes(x.toLowerCase())||(null===(s=e.external_code)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase())),r="all"===h||(null===(a=e.rarities)||void 0===a?void 0:a.code)===h,i="all"===j||(null===(l=e.card_sets)||void 0===l?void 0:l.code)===j,n=p||e.is_active;return t&&r&&i&&n}),[a,x,h,j,p]),k=(0,t.useMemo)(()=>Array.from(new Set(a.map(e=>{var s;return null===(s=e.rarities)||void 0===s?void 0:s.code}).filter(Boolean))),[a]),_=(0,t.useMemo)(()=>Array.from(new Set(a.map(e=>{var s;return null===(s=e.card_sets)||void 0===s?void 0:s.code}).filter(Boolean))),[a]),S=async(e,s)=>{try{let{error:a}=await c.OQ.from("card_definitions").update({is_active:!s}).eq("id",e);if(a)throw a;m(a=>a.map(a=>a.id===e?{...a,is_active:!s}:a))}catch(e){console.error("Error toggling card active status:",e)}},z=async e=>{if(confirm("Are you sure you want to delete this card? This action cannot be undone."))try{let{error:s}=await c.OQ.from("card_definitions").delete().eq("id",e);if(s)throw s;m(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Error deleting card:",e)}},A=e=>{var s,a;return{id:e.id,setCode:(null===(s=e.card_sets)||void 0===s?void 0:s.code)||"BASE",externalCode:e.external_code,name:e.name,rarity:(null===(a=e.rarities)||void 0===a?void 0:a.code)||"common",typeLine:e.type_line,manaCost:e.mana_cost,power:e.power,toughness:e.toughness,keywords:e.keywords,rules:e.rules_json||{},flavorText:e.flavor_text,artist:e.artist}};return w?(0,l.jsx)(d.default,{cardId:y||void 0,onSave:()=>{window.location.reload()},onCancel:()=>{b(!1),N(null)}}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(i.Zb,{children:[(0,l.jsx)(i.Ol,{children:(0,l.jsx)(i.ll,{children:"Filters"})}),(0,l.jsx)(i.aY,{children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Search"}),(0,l.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),className:"w-full border rounded-md px-3 py-2",placeholder:"Search cards..."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Rarity"}),(0,l.jsxs)("select",{value:h,onChange:e=>v(e.target.value),className:"w-full border rounded-md px-3 py-2",children:[(0,l.jsx)("option",{value:"all",children:"All Rarities"}),k.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Set"}),(0,l.jsxs)("select",{value:j,onChange:e=>f(e.target.value),className:"w-full border rounded-md px-3 py-2",children:[(0,l.jsx)("option",{value:"all",children:"All Sets"}),_.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsx)("div",{className:"flex items-end",children:(0,l.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:p,onChange:e=>g(e.target.checked),className:"rounded"}),(0,l.jsx)("span",{className:"text-sm",children:"Show inactive cards"})]})})]})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",C.length," of ",a.length," cards"]}),(0,l.jsx)(r.z,{onClick:()=>{N(null),b(!0)},children:"Create New Card"})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:C.map(e=>{var s,a,t;return(0,l.jsx)(i.Zb,{className:(0,o.cn)("relative overflow-hidden",!e.is_active&&"opacity-50 border-red-300"),children:(0,l.jsxs)(i.aY,{className:"p-4",children:[(0,l.jsx)("div",{className:"mb-4 flex justify-center",children:(0,l.jsx)(n.Z,{card:A(e),size:"small"})}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"font-semibold",children:"Code:"}),(0,l.jsx)("span",{className:"font-mono",children:e.external_code||"N/A"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"font-semibold",children:"Rarity:"}),(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs text-white",style:{backgroundColor:(0,o.kg)((null===(s=e.rarities)||void 0===s?void 0:s.code)||"common")},children:null===(a=e.rarities)||void 0===a?void 0:a.display_name})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"font-semibold",children:"Set:"}),(0,l.jsx)("span",{children:null===(t=e.card_sets)||void 0===t?void 0:t.code})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"font-semibold",children:"Status:"}),(0,l.jsx)("span",{className:e.is_active?"text-green-600":"text-red-600",children:e.is_active?"Active":"Inactive"})]}),e.keywords&&e.keywords.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"Keywords:"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.keywords.slice(0,3).map(e=>(0,l.jsx)("span",{className:"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-xs",children:e},e)),e.keywords.length>3&&(0,l.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.keywords.length-3," more"]})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,l.jsx)(r.z,{onClick:()=>{N(e.id),b(!0)},size:"sm",className:"w-full",children:"Edit"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsx)(r.z,{onClick:()=>S(e.id,e.is_active),size:"sm",variant:"outline",className:e.is_active?"text-red-600":"text-green-600",children:e.is_active?"Deactivate":"Activate"}),(0,l.jsx)(r.z,{onClick:()=>z(e.id),size:"sm",variant:"outline",className:"text-red-600",children:"Delete"})]})]})]})},e.id)})}),0===C.length&&(0,l.jsx)(i.Zb,{children:(0,l.jsxs)(i.aY,{className:"py-12 text-center",children:[(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"No cards found matching your filters"}),(0,l.jsx)(r.z,{onClick:()=>{u(""),v("all"),f("all"),g(!1)},variant:"outline",children:"Clear Filters"})]})})]})}}},function(e){e.O(0,[972,722,205,668,971,117,744],function(){return e(e.s=6658)}),_N_E=e.O()}]);